import { getServerSideSitemap } from "next-sitemap";
import _ from "lodash";

export const GetPost = async () => {
	const data = await fetch("http://localhost:8080/api/reportes", {
		method: "GET",
	});
	const res = await data.json();
	return res;
};

export const getServerSideProps = async (ctx) => {
	const siteUrl = "https://transotas.org";
	const data = await GetPost();
	const fields = data.map((data) => ({
		loc: `${siteUrl}/view/denuncia/${data.id}?Page=1&slug=${_.kebabCase(
			data.titulo.replace(/[\W_]+/g, "-")
		)}`,
		lastmod: data.fechaix,
	}));

	return getServerSideSitemap(ctx, fields);
};

export default function Site() {
	//console
}
